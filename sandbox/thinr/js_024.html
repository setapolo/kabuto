
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Raphaël · Curver</title>
        <script type="text/javascript" charset="utf-8">
        </script>
    </head>
    <body bgcolor="#000000">
        <p id="copy">Demo of <a href="http://raphaeljs.com/">Raphaël</a>—JavaScript Vector Library</p>
    </body>
</html>

<script type="text/javascript">
//CCas Closure Cascading v.0.03 2020/3/28 moka
var tags=function(s){
  return function(p){
    return function(a){
      var e = document.createElement(s);
      e = Object.assign(e,a);
      p.appendChild(e);
      return e
    }
  }
};

script=tags("script");
canvas=tags("canvas");
div=tags("div");

raphaeljs=function(yyy){
  return function(a){
    var name = (a["name"])?a["name"]:"holder";
    var width = (a["width"])?a["width"]:"620";
    var height = (a["height"])?a["height"]:"420";
    var ret=[function(){
      window.r = Raphael(name, width, height);
    }];
    return ret;
  }
};
rect=function(xxx){
  return function(a){
    var x = (a["x"])?a["x"]:"0";
    var y = (a["y"])?a["y"]:"0";
    var width = (a["width"])?a["width"]:"619";
    var height = (a["height"])?a["height"]:"419";
    var _r = (a["r"])?a["r"]:"10";
    xxx.push(function(){
      r.rect(x, y, width, height, _r).attr({stroke: "#666"});
    });
    var aa=Object.keys(a).map(function(c,i){
      return c;
    });
    return xxx;
  }
};
text=function(xxx){
  return function(a){
    var x = (a["x"])?a["x"]:"0";
    var y = (a["y"])?a["y"]:"0";
    var text = (a["text"])?a["text"]:"text";
    xxx.push(function(){
      r.text(x, y, text).attr({fill: "#fff", "font-size": 16});
    });
    var aa=Object.keys(a).map(function(c,i){
      return c;
    });
    return xxx;
  }
};
set_controls=function(xxx){
  return function(a){
            window.init = function () {
                var ball_r=8;
                var curve=function(x, y, ax, ay, bx, by, zx, zy, color) {
                  discattr = {fill: "#fff", stroke: "none"};
                    var path = [["M", x, y], ["C", ax, ay, bx, by, zx, zy]],
                        path2 = [["M", x, y], ["L", ax, ay], ["M", bx, by], ["L", zx, zy]],
                        curve = r.path(path).attr({stroke: color || Raphael.getColor(), "stroke-width": 4, "stroke-linecap": "round"}),
                        controls = r.set(
                            r.path(path2).attr({stroke: "#ccc", "stroke-dasharray": ". "}),
                            r.circle(x, y, ball_r).attr(discattr),
                            r.circle(ax, ay, ball_r).attr(discattr),
                            r.circle(bx, by, ball_r).attr(discattr),
                            r.circle(zx, zy, ball_r).attr(discattr)
                        );
                    controls[1].update = function (x, y) {
                        var X = this.attr("cx") + x,
                            Y = this.attr("cy") + y;
                        this.attr({cx: X, cy: Y});
                        path[0][1] = X;
                        path[0][2] = Y;
                        path2[0][1] = X;
                        path2[0][2] = Y;
                        controls[2].update(x, y);
                    };
                    controls[2].update = function (x, y) {
                        var X = this.attr("cx") + x,
                            Y = this.attr("cy") + y;
                        this.attr({cx: X, cy: Y});
                        path[1][1] = X;
                        path[1][2] = Y;
                        path2[1][1] = X;
                        path2[1][2] = Y;
                        curve.attr({path: path});
                        controls[0].attr({path: path2});
                    };
                    controls[3].update = function (x, y) {
                        var X = this.attr("cx") + x,
                            Y = this.attr("cy") + y;
                        this.attr({cx: X, cy: Y});
                        path[1][3] = X;
                        path[1][4] = Y;
                        path2[2][1] = X;
                        path2[2][2] = Y;
                        curve.attr({path: path});
                        controls[0].attr({path: path2});
                    };
                    controls[4].update = function (x, y) {
                        var X = this.attr("cx") + x,
                            Y = this.attr("cy") + y;
                        this.attr({cx: X, cy: Y});
                        path[1][5] = X;
                        path[1][6] = Y;
                        path2[3][1] = X;
                        path2[3][2] = Y;
                        controls[3].update(x, y);
                    };
                    controls.drag(move, up);
                }
                function move(dx, dy) {
                    this.update(dx - (this.dx || 0), dy - (this.dy || 0));
                    this.dx = dx;
                    this.dy = dy;
                }
                function up() {
                    this.dx = this.dy = 0;
                }
                curve(70, 100, 110, 100, 130, 200, 170, 200, "hsb(0, .75, .75)");
                curve(170, 100, 210, 100, 230, 200, 270, 200, "hsb(.8, .75, .75)");
                curve(270, 100, 310, 100, 330, 200, 370, 200, "hsb(.3, .75, .75)");
                curve(370, 100, 410, 100, 430, 200, 470, 200, "hsb(.6, .75, .75)");
                curve(470, 100, 510, 100, 530, 200, 570, 200, "hsb(.1, .75, .75)");
            };


    initi=function(){
      xxx.map(function(c){
        console.log(c());
      });
      init();
    }
    return null;
  }
};


(function (w,flg){
  return function(d,flg){
    var a={};
    var aa=[null];
    var aaa=[];
    var lv=[document.body];
    var k=null;
    var parent=document.body;
    var f= function(c){
        var _f = (typeof c=="function")?c:null;
        (k==null)?(_f!=null)?function(){
          aaa.push(a);
          aa.push(_f);
          a={};
        }():0:0;        
//        (typeof c=="object")?(function(){
//              console.log(window[c.source]);
//              c=(window[c.source])?window[c.source]:c;
//              a = Object.assign(a,c);
//        }()):0;
        (c==null)?(function(){
            (a!=null)?(aaa.push(a)):0;
            aa.map(function(cc,i){
                parent =  (cc!=null)?cc(lv[lv.length -1])(aaa[i]):document.body;
                (parent != document.body)?lv.push(parent):0;
            });
            lv.pop();
            aaa=[];
            aa=[null];
        })():0;
        var v =(k != null)?c:null;
        k=(typeof c=="string")?(k==null)?c:k:k;
        ((k!=null)&&(v!=null))?a[k]=v:0;
        k=((k!=null)&&(v!=null))?null:k;
      return f;
    }
    return f;
  };
})(window)
    (document)
      (div)
        ("id")("holder")()
      (raphaeljs)
        ("name")("holder")
        ("width")("620")
        ("height")("420")
        (rect)
          ("x")("0")
          ("y")("0")
          ("width")("619")
          ("height")("419")
          ("r")("10")()
        (text)
          ("x")("310")
          ("y")("20")
          ("text")("Drag the points to change the curves")
        (set_controls)
      ()()()  
      (script)
        ("src")("https://cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js")
        ("onload")(initi)()
      (div)
        ("innerHTML")("forked from https://wizardace.com/d3-forcesimulation-onlynode/")()
        ()
           ;

</script>
